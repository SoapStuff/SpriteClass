<!--suppress ALL -->
<script>
    var gl;
    var canvas;

    function main() {
        canvas = document.querySelector("#glCanvas");
        canvas.width = document.body.clientWidth;
        canvas.height = document.body.clientHeight;

        // Initialize the GL context
        gl = canvas.getContext("webgl");

        // Only continue if WebGL is available and working
        if (!gl) {
            alert("Unable to initialize WebGL. Your browser or machine may not support it.");
            return;
        }

        // Clear the canvas
        gl.clearColor(0.5, 0.5, 0.5, 1.0);

        // Clear the color buffer with specified clear color
        gl.clear(gl.COLOR_BUFFER_BIT);
    }

    main();

    var request = new XMLHttpRequest();

    request.open('POST', 'gl');
    request.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    request.onload = function () {
        var data = JSON.parse(request.responseText);
        console.log(data);

        for (key in data) {
            drawPoints(canvas, gl, key, data[key]);
        }
    };
    request.send(JSON.stringify({width : canvas.width, height : canvas.height}));
</script>